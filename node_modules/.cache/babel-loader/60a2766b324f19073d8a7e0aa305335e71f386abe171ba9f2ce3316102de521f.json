{"ast":null,"code":"var _jsxFileName = \"/Users/rizwan/Documents/FoodDelhiveryApp/src/RestaurantsLists.js\",\n  _s = $RefreshSig$();\n// RestaurantsLists.js\nimport './App.css';\nimport { useState, useEffect, useMemo } from \"react\";\nimport { fetchRestaurants } from \"./api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DEFAULT_LAT = 28.7041; // Delhi fallback\nconst DEFAULT_LNG = 77.1025;\nconst TopRes = ({\n  data,\n  onViewMenu\n}) => {\n  const {\n    name,\n    cloudinaryImageId,\n    avgRating,\n    cuisines,\n    areaName,\n    id\n  } = {\n    ...(data === null || data === void 0 ? void 0 : data.info)\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"toprescard\",\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      src: \"https://media-assets.swiggy.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_660/\" + cloudinaryImageId,\n      alt: name,\n      className: \"deliveryIcons\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 16,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n      children: Array.isArray(cuisines) ? cuisines.join(\", \") : cuisines\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n      children: areaName\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"\\u2B50 \", avgRating]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => onViewMenu(id),\n      children: \"View Menu\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 15,\n    columnNumber: 5\n  }, this);\n};\n_c = TopRes;\nconst RestaurantsLists = ({\n  onSelectRestaurant\n}) => {\n  _s();\n  const [lat, setLat] = useState(DEFAULT_LAT);\n  const [lng, setLng] = useState(DEFAULT_LNG);\n  const [list, setList] = useState([]);\n  const [title, setTitle] = useState(\"Top Restaurants\");\n  const [loading, setLoading] = useState(true);\n  const [locError, setLocError] = useState(\"\");\n\n  // Get location once\n  useEffect(() => {\n    let cancelled = false;\n    if (!navigator.geolocation) {\n      setLocError(\"Geolocation not supported. Using default location.\");\n      return;\n    }\n    navigator.geolocation.getCurrentPosition(pos => {\n      if (cancelled) return;\n      setLat(pos.coords.latitude);\n      setLng(pos.coords.longitude);\n    }, err => {\n      setLocError(err.message || \"Location permission denied. Using default location.\");\n    }, {\n      enableHighAccuracy: true,\n      timeout: 8000,\n      maximumAge: 60000\n    });\n    return () => {\n      cancelled = true;\n    };\n  }, []);\n\n  // Fetch restaurants when lat/lng change\n  useEffect(() => {\n    const ac = new AbortController();\n    setLoading(true);\n    fetchRestaurants(lat, lng, ac.signal).then(({\n      restaurants,\n      areaTitle\n    }) => {\n      setList(restaurants || []);\n      setTitle(areaTitle || \"Top restaurants near you\");\n    }).catch(e => {\n      console.error(e);\n    }).finally(() => setLoading(false));\n    return () => ac.abort();\n  }, [lat, lng]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [locError && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: \"#b00\"\n      },\n      children: locError\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 20\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading restaurants...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"toprescontainer\",\n      children: list === null || list === void 0 ? void 0 : list.map(each => {\n        var _each$info;\n        return /*#__PURE__*/_jsxDEV(TopRes, {\n          data: each,\n          onViewMenu: id => onSelectRestaurant({\n            id,\n            lat,\n            lng\n          })\n        }, each === null || each === void 0 ? void 0 : (_each$info = each.info) === null || _each$info === void 0 ? void 0 : _each$info.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n};\n_s(RestaurantsLists, \"g/tSysIXqpTW+kfS4d5UvUN1jew=\");\n_c2 = RestaurantsLists;\nexport default RestaurantsLists;\nvar _c, _c2;\n$RefreshReg$(_c, \"TopRes\");\n$RefreshReg$(_c2, \"RestaurantsLists\");","map":{"version":3,"names":["useState","useEffect","useMemo","fetchRestaurants","jsxDEV","_jsxDEV","DEFAULT_LAT","DEFAULT_LNG","TopRes","data","onViewMenu","name","cloudinaryImageId","avgRating","cuisines","areaName","id","info","className","children","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","Array","isArray","join","onClick","_c","RestaurantsLists","onSelectRestaurant","_s","lat","setLat","lng","setLng","list","setList","title","setTitle","loading","setLoading","locError","setLocError","cancelled","navigator","geolocation","getCurrentPosition","pos","coords","latitude","longitude","err","message","enableHighAccuracy","timeout","maximumAge","ac","AbortController","signal","then","restaurants","areaTitle","catch","e","console","error","finally","abort","style","color","map","each","_each$info","_c2","$RefreshReg$"],"sources":["/Users/rizwan/Documents/FoodDelhiveryApp/src/RestaurantsLists.js"],"sourcesContent":["// RestaurantsLists.js\nimport './App.css';\nimport { useState, useEffect, useMemo } from \"react\";\nimport { fetchRestaurants } from \"./api\";\n\nconst DEFAULT_LAT = 28.7041; // Delhi fallback\nconst DEFAULT_LNG = 77.1025;\n\nconst TopRes = ({ data, onViewMenu }) => {\n  const { name, cloudinaryImageId, avgRating, cuisines, areaName, id } = {\n    ...data?.info,\n  };\n\n  return (\n    <div className=\"toprescard\">\n      <img\n        src={\"https://media-assets.swiggy.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_660/\" + cloudinaryImageId}\n        alt={name}\n        className=\"deliveryIcons\"\n      />\n      <h3>{name}</h3>\n      <h4>{Array.isArray(cuisines) ? cuisines.join(\", \") : cuisines}</h4>\n      <h4>{areaName}</h4>\n      <p>‚≠ê {avgRating}</p>\n      <button onClick={() => onViewMenu(id)}>View Menu</button>\n    </div>\n  );\n};\n\nconst RestaurantsLists = ({ onSelectRestaurant }) => {\n  const [lat, setLat] = useState(DEFAULT_LAT);\n  const [lng, setLng] = useState(DEFAULT_LNG);\n  const [list, setList] = useState([]);\n  const [title, setTitle] = useState(\"Top Restaurants\");\n  const [loading, setLoading] = useState(true);\n  const [locError, setLocError] = useState(\"\");\n\n  // Get location once\n  useEffect(() => {\n    let cancelled = false;\n    if (!navigator.geolocation) {\n      setLocError(\"Geolocation not supported. Using default location.\");\n      return;\n    }\n    navigator.geolocation.getCurrentPosition(\n      pos => {\n        if (cancelled) return;\n        setLat(pos.coords.latitude);\n        setLng(pos.coords.longitude);\n      },\n      err => {\n        setLocError(err.message || \"Location permission denied. Using default location.\");\n      },\n      { enableHighAccuracy: true, timeout: 8000, maximumAge: 60000 }\n    );\n    return () => { cancelled = true; };\n  }, []);\n\n  // Fetch restaurants when lat/lng change\n  useEffect(() => {\n    const ac = new AbortController();\n    setLoading(true);\n    fetchRestaurants(lat, lng, ac.signal)\n      .then(({ restaurants, areaTitle }) => {\n        setList(restaurants || []);\n        setTitle(areaTitle || \"Top restaurants near you\");\n      })\n      .catch(e => {\n        console.error(e);\n      })\n      .finally(() => setLoading(false));\n    return () => ac.abort();\n  }, [lat, lng]);\n\n  return (\n    <div>\n      {locError && <p style={{ color: \"#b00\" }}>{locError}</p>}\n      <h3>{title}</h3>\n      {loading ? (\n        <p>Loading restaurants...</p>\n      ) : (\n        <div className=\"toprescontainer\">\n          {list?.map(each => (\n            <TopRes\n              key={each?.info?.id}\n              data={each}\n              onViewMenu={(id) => onSelectRestaurant({ id, lat, lng })}\n            />\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default RestaurantsLists;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}